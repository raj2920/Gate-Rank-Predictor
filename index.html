<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GATE Rank Predictor 2026 | Accurate Rank Prediction</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --success: #27ae60;
            --warning: #f39c12;
        }

        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary), #1a2530);
            color: white;
            padding: 25px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .header-content {
            text-align: center;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .logo i {
            font-size: 2.8rem;
            color: var(--secondary);
        }

        .logo h1 {
            font-size: 2.2rem;
            font-weight: 700;
        }

        .logo span {
            color: var(--secondary);
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 50px;
        }

        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Input Section */
        .input-section {
            background: white;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        }

        .section-title {
            color: var(--primary);
            margin-bottom: 25px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 3px solid var(--secondary);
            padding-bottom: 10px;
        }

        .marks-input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        @media (max-width: 500px) {
            .marks-input-grid {
                grid-template-columns: 1fr;
            }
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .input-group input {
            width: 100%;
            padding: 14px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .input-group input:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .marks-type {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
        }

        .marks-type h4 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .marks-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 12px;
        }

        .marks-label {
            width: 120px;
            font-weight: 600;
            color: #555;
        }

        .marks-input {
            flex: 1;
            display: flex;
            gap: 10px;
        }

        .marks-input input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            text-align: center;
        }

        .calculate-btn {
            width: 100%;
            padding: 16px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .calculate-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .calculate-btn:active {
            transform: translateY(0);
        }

        /* Results Section */
        .results-section {
            background: white;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .result-display {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px dashed #ddd;
        }

        .result-value {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--secondary);
            margin: 10px 0;
        }

        .result-label {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 5px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        @media (max-width: 600px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
        }

        .result-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-top: 4px solid var(--secondary);
        }

        .result-card h4 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .card-value {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--secondary);
            margin: 10px 0;
        }

        .card-label {
            color: #666;
            font-size: 0.9rem;
        }

        /* Graph Section */
        .graph-section {
            margin-top: 40px;
            background: white;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        }

        .graph-container {
            margin-top: 20px;
            height: 400px;
            position: relative;
        }

        /* Footer */
        footer {
            background: var(--primary);
            color: white;
            padding: 40px 0 20px;
            margin-top: 50px;
        }

        .footer-content {
            text-align: center;
            margin-bottom: 30px;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.9rem;
        }

        .note-box {
            background: #fff8e1;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid var(--warning);
        }

        .note-box p {
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .highlight {
            color: var(--accent);
            font-weight: 700;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: var(--secondary);
        }

        .loading i {
            font-size: 2rem;
            margin-bottom: 10px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-graduation-cap"></i>
                    <div>
                        <h1>GATE <span>Rank Predictor</span> 2026</h1>
                        <p class="subtitle">Accurate Rank Prediction Using GATE 2025 Actual Data</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="main-content">
            <!-- Input Section -->
            <div class="input-section">
                <h2 class="section-title">
                    <i class="fas fa-calculator"></i> Enter Your Marks
                </h2>
                
                <div class="marks-type">
                    <h4><i class="fas fa-edit"></i> Type 1 Questions (1 Mark Each)</h4>
                    <div class="marks-row">
                        <div class="marks-label">Correct Answers:</div>
                        <div class="marks-input">
                            <input type="number" id="type1Correct" min="0" max="100" step="1" placeholder="0" value="25">
                            <span style="line-height: 40px;">× 1 = <span id="type1CorrectTotal">25</span></span>
                        </div>
                    </div>
                    <div class="marks-row">
                        <div class="marks-label">Wrong Answers:</div>
                        <div class="marks-input">
                            <input type="number" id="type1Wrong" min="0" max="100" step="1" placeholder="0" value="5">
                            <span style="line-height: 40px;">× 0.33 = -<span id="type1WrongTotal">1.65</span></span>
                        </div>
                    </div>
                </div>

                <div class="marks-type">
                    <h4><i class="fas fa-edit"></i> Type 2 Questions (2 Marks Each)</h4>
                    <div class="marks-row">
                        <div class="marks-label">Correct Answers:</div>
                        <div class="marks-input">
                            <input type="number" id="type2Correct" min="0" max="50" step="1" placeholder="0" value="18">
                            <span style="line-height: 40px;">× 2 = <span id="type2CorrectTotal">36</span></span>
                        </div>
                    </div>
                    <div class="marks-row">
                        <div class="marks-label">Wrong Answers:</div>
                        <div class="marks-input">
                            <input type="number" id="type2Wrong" min="0" max="50" step="1" placeholder="0" value="3">
                            <span style="line-height: 40px;">× 0.67 = -<span id="type2WrongTotal">2.01</span></span>
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <label for="category"><i class="fas fa-users"></i> Your Category</label>
                    <select id="category" style="width: 100%; padding: 14px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                        <option value="GEN" selected>General</option>
                        <option value="OBC">OBC-NCL</option>
                        <option value="EWS">EWS</option>
                        <option value="SC">SC</option>
                        <option value="ST">ST</option>
                        <option value="PWD">PwD</option>
                    </select>
                </div>

                <div class="note-box">
                    <p><strong>Note:</strong> Based on GATE 2025 actual data. Type 1 has ⅓ negative marking, Type 2 has ⅔ negative marking.</p>
                    <p><strong>Total Marks =</strong> (Type1 Correct × 1 - Type1 Wrong × 0.33) + (Type2 Correct × 2 - Type2 Wrong × 0.67)</p>
                </div>

                <button id="predictBtn" class="calculate-btn">
                    <i class="fas fa-chart-line"></i> Predict My Rank & Score
                </button>

                <div id="loading" class="loading">
                    <i class="fas fa-spinner"></i>
                    <p>Calculating your rank...</p>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results-section">
                <h2 class="section-title">
                    <i class="fas fa-chart-bar"></i> Prediction Results
                </h2>
                
                <div class="result-display" id="resultDisplay">
                    <div class="result-label">Your Total Marks</div>
                    <div class="result-value" id="totalMarksValue">56.00</div>
                    <div class="result-label">out of 100</div>
                </div>

                <div class="results-grid">
                    <div class="result-card">
                        <h4><i class="fas fa-trophy"></i> Expected Rank</h4>
                        <div class="card-value" id="predictedRankValue">--</div>
                        <div class="card-label">All India Rank</div>
                    </div>

                    <div class="result-card">
                        <h4><i class="fas fa-star"></i> GATE Score</h4>
                        <div class="card-value" id="predictedScoreValue">--</div>
                        <div class="card-label">Out of 1000</div>
                    </div>

                    <div class="result-card">
                        <h4><i class="fas fa-percentage"></i> Percentile</h4>
                        <div class="card-value" id="percentileValue">--</div>
                        <div class="card-label">Approximate</div>
                    </div>

                    <div class="result-card">
                        <h4><i class="fas fa-chart-line"></i> Rank Range</h4>
                        <div class="card-value" id="rankRangeValue">--</div>
                        <div class="card-label">±15% variation</div>
                    </div>
                </div>

                <div class="note-box" style="background: #e8f4fc; border-left-color: var(--secondary);">
                    <p><strong>Analysis:</strong> <span id="analysisText">Enter your marks to see analysis</span></p>
                    <p><strong>Note:</strong> This prediction is based on GATE 2025 actual data patterns. Actual 2026 ranks may vary.</p>
                </div>
            </div>
        </div>

        <!-- Graph Section -->
        <div class="graph-section">
            <h2 class="section-title">
                <i class="fas fa-chart-line"></i> Your Position on Rank Curve
            </h2>
            <p style="color: #666; margin-bottom: 20px;">See where you stand among GATE 2025 candidates</p>
            
            <div class="graph-container">
                <canvas id="rankChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <h3>GATE Rank Predictor 2026</h3>
                <p>Using actual GATE 2025 data for accurate predictions</p>
            </div>
            <div class="copyright">
                <p>&copy; 2025 GATE Rank Predictor. Based on actual GATE 2025 data from official sources.</p>
            </div>
        </div>
    </footer>

    <script>
        // GATE 2025 Actual Data (Complete dataset from your files)
        const gate2025Data = [
            { rank: 1, score: 1000, marks: 100.00 },
            { rank: 4, score: 985, marks: 91.64 },
            { rank: 8, score: 976, marks: 90.75 },
            { rank: 12, score: 959, marks: 89.04 },
            { rank: 14, score: 956, marks: 88.71 },
            { rank: 32, score: 929, marks: 86.11 },
            { rank: 38, score: 922, marks: 85.43 },
            { rank: 58, score: 906, marks: 83.84 },
            { rank: 65, score: 903, marks: 83.51 },
            { rank: 130, score: 860, marks: 79.29 },
            { rank: 215, score: 833, marks: 76.69 },
            { rank: 306, score: 810, marks: 73.57 },
            { rank: 308, score: 810, marks: 74.38 },
            { rank: 336, score: 802, marks: 73.57 },
            { rank: 351, score: 797, marks: 73.16 },
            { rank: 365, score: 797, marks: 73.11 },
            { rank: 416, score: 785, marks: 71.93 },
            { rank: 532, score: 767, marks: 70.20 },
            { rank: 609, score: 757, marks: 69.21 },
            { rank: 622, score: 756, marks: 69.07 },
            { rank: 724, score: 744, marks: 67.91 },
            { rank: 1121, score: 711, marks: 64.66 },
            { rank: 1171, score: 708, marks: 64.34 },
            { rank: 1414, score: 689, marks: 62.52 },
            { rank: 1445, score: 688, marks: 62.39 },
            { rank: 1605, score: 649, marks: 58.47 },
            { rank: 2434, score: 632, marks: 56.87 },
            { rank: 2498, score: 628, marks: 56.54 },
            { rank: 3466, score: 589, marks: 52.70 },
            { rank: 4135, score: 568, marks: 50.65 },
            { rank: 5620, score: 529, marks: 46.79 },
            { rank: 6600, score: 506, marks: 44.52 },
            { rank: 9288, score: 460, marks: 40.02 },
            { rank: 11184, score: 436, marks: 37.69 },
            { rank: 11318, score: 435, marks: 37.56 },
            { rank: 11517, score: 433, marks: 37.37 },
            { rank: 12652, score: 420, marks: 36.07 },
            { rank: 14720, score: 400, marks: 34.12 },
            { rank: 18757, score: 368, marks: 31.01 },
            { rank: 19661, score: 364, marks: 30.54 },
            { rank: 23003, score: 343, marks: 28.56 }
        ];

        // Chart instance
        let rankChart = null;

        // Calculate total marks
        function calculateTotalMarks() {
            const type1Correct = parseInt(document.getElementById('type1Correct').value) || 0;
            const type1Wrong = parseInt(document.getElementById('type1Wrong').value) || 0;
            const type2Correct = parseInt(document.getElementById('type2Correct').value) || 0;
            const type2Wrong = parseInt(document.getElementById('type2Wrong').value) || 0;
            
            // Update calculation display
            document.getElementById('type1CorrectTotal').textContent = type1Correct;
            document.getElementById('type1WrongTotal').textContent = (type1Wrong * 0.33).toFixed(2);
            document.getElementById('type2CorrectTotal').textContent = type2Correct * 2;
            document.getElementById('type2WrongTotal').textContent = (type2Wrong * 0.67).toFixed(2);
            
            // Calculate total marks
            const type1Marks = type1Correct - (type1Wrong * 0.33);
            const type2Marks = (type2Correct * 2) - (type2Wrong * 0.67);
            const totalMarks = type1Marks + type2Marks;
            
            // Update total marks display
            document.getElementById('totalMarksValue').textContent = totalMarks.toFixed(2);
            
            return totalMarks;
        }

        // Calculate rank from marks (fixed interpolation)
        function calculateRankFromMarks(marks) {
            // Sort data by marks descending
            const sortedData = [...gate2025Data].sort((a, b) => b.marks - a.marks);
            
            // If marks are above highest recorded marks
            if (marks > sortedData[0].marks) {
                return 1;
            }
            
            // If marks are below lowest recorded marks
            if (marks < sortedData[sortedData.length - 1].marks) {
                // Extrapolate using last two points
                const last = sortedData[sortedData.length - 1];
                const secondLast = sortedData[sortedData.length - 2];
                const slope = (last.rank - secondLast.rank) / (last.marks - secondLast.marks);
                const predictedRank = last.rank + (marks - last.marks) * slope;
                return Math.round(Math.max(predictedRank, last.rank));
            }
            
            // Find the two points between which the marks lie
            let lowerIdx = 0;
            let upperIdx = 0;
            
            for (let i = 0; i < sortedData.length - 1; i++) {
                if (marks <= sortedData[i].marks && marks >= sortedData[i + 1].marks) {
                    lowerIdx = i;
                    upperIdx = i + 1;
                    break;
                }
            }
            
            // Linear interpolation
            const lower = sortedData[lowerIdx];
            const upper = sortedData[upperIdx];
            
            const marksRange = lower.marks - upper.marks;
            const rankRange = lower.rank - upper.rank;
            const fraction = (lower.marks - marks) / marksRange;
            
            const predictedRank = lower.rank - (fraction * rankRange);
            return Math.round(predictedRank);
        }

        // Calculate GATE score from marks
        function calculateScoreFromMarks(marks) {
            // Sort data by marks descending
            const sortedData = [...gate2025Data].sort((a, b) => b.marks - a.marks);
            
            // If marks are above highest recorded marks
            if (marks > sortedData[0].marks) {
                return 1000;
            }
            
            // If marks are below lowest recorded marks
            if (marks < sortedData[sortedData.length - 1].marks) {
                // Extrapolate using last two points
                const last = sortedData[sortedData.length - 1];
                const secondLast = sortedData[sortedData.length - 2];
                const slope = (last.score - secondLast.score) / (last.marks - secondLast.marks);
                const predictedScore = last.score + (marks - last.marks) * slope;
                return Math.round(Math.max(predictedScore, 0));
            }
            
            // Find the two points between which the marks lie
            let lowerIdx = 0;
            let upperIdx = 0;
            
            for (let i = 0; i < sortedData.length - 1; i++) {
                if (marks <= sortedData[i].marks && marks >= sortedData[i + 1].marks) {
                    lowerIdx = i;
                    upperIdx = i + 1;
                    break;
                }
            }
            
            // Linear interpolation
            const lower = sortedData[lowerIdx];
            const upper = sortedData[upperIdx];
            
            const marksRange = lower.marks - upper.marks;
            const scoreRange = lower.score - upper.score;
            const fraction = (lower.marks - marks) / marksRange;
            
            const predictedScore = lower.score - (fraction * scoreRange);
            return Math.round(predictedScore);
        }

        // Calculate percentile from rank
        function calculatePercentile(rank) {
            // Assuming approximately 150,000 candidates for GATE
            const totalCandidates = 150000;
            const percentile = ((totalCandidates - rank) / totalCandidates) * 100;
            return Math.min(100, Math.max(0, percentile.toFixed(2)));
        }

        // Update chart with user position
        function updateChart(userMarks, userRank, userScore) {
            const ctx = document.getElementById('rankChart').getContext('2d');
            
            // Prepare data for chart (use every 5th point for clarity)
            const chartData = gate2025Data.filter((_, index) => index % 3 === 0 || index === 0 || index === gate2025Data.length - 1);
            
            // Add user point to chart data
            const chartLabels = chartData.map(d => `Rank ${d.rank}`);
            const chartMarks = chartData.map(d => d.marks);
            
            // Create chart
            if (rankChart) {
                rankChart.destroy();
            }
            
            rankChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'GATE 2025 Actual Data',
                            data: chartData.map(d => ({
                                x: d.rank,
                                y: d.marks
                            })),
                            backgroundColor: 'rgba(52, 152, 219, 0.6)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 1,
                            pointRadius: 4,
                            showLine: true,
                            tension: 0.4
                        },
                        {
                            label: 'Your Position',
                            data: [{
                                x: userRank,
                                y: userMarks
                            }],
                            backgroundColor: 'rgba(231, 76, 60, 1)',
                            borderColor: 'rgba(192, 57, 43, 1)',
                            borderWidth: 2,
                            pointRadius: 8
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: `Your Position: Rank ${userRank.toLocaleString()} | Marks: ${userMarks.toFixed(2)}`,
                            font: {
                                size: 16,
                                weight: 'bold'
                            },
                            color: '#2c3e50'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.datasetIndex === 0) {
                                        return `Rank ${context.parsed.x}: ${context.parsed.y.toFixed(2)} marks`;
                                    } else {
                                        return `Your Position: Rank ${userRank.toLocaleString()}, ${userMarks.toFixed(2)} marks`;
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'Rank (Lower is Better)',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            reverse: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Marks (out of 100)',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            min: 20,
                            max: 100
                        }
                    }
                }
            });
        }

        // Get analysis text based on rank
        function getAnalysisText(rank, marks, score) {
            if (rank <= 100) {
                return `Excellent! With rank ${rank.toLocaleString()}, you have excellent chances for top IITs.`;
            } else if (rank <= 500) {
                return `Great! Rank ${rank.toLocaleString()} is very competitive for all IITs and top NITs.`;
            } else if (rank <= 1000) {
                return `Good! Rank ${rank.toLocaleString()} gives you good chances for IITs and excellent chances for NITs.`;
            } else if (rank <= 3000) {
                return `Good score! With rank ${rank.toLocaleString()}, you have good chances for NITs and IIITs.`;
            } else if (rank <= 10000) {
                return `Average score. Rank ${rank.toLocaleString()} may get you admission in good universities.`;
            } else {
                return `Keep improving. Consider reappearing for better opportunities.`;
            }
        }

        // Main prediction function
        function predictRankAndScore() {
            // Show loading
            document.getElementById('loading').style.display = 'block';
            
            setTimeout(() => {
                // Calculate total marks
                const totalMarks = calculateTotalMarks();
                
                // Calculate rank
                const predictedRank = calculateRankFromMarks(totalMarks);
                
                // Calculate score
                const predictedScore = calculateScoreFromMarks(totalMarks);
                
                // Calculate percentile
                const percentile = calculatePercentile(predictedRank);
                
                // Calculate rank range (±15%)
                const rankLower = Math.max(1, Math.round(predictedRank * 0.85));
                const rankUpper = Math.round(predictedRank * 1.15);
                
                // Update results display
                document.getElementById('predictedRankValue').textContent = predictedRank.toLocaleString();
                document.getElementById('predictedScoreValue').textContent = predictedScore;
                document.getElementById('percentileValue').textContent = percentile + '%';
                document.getElementById('rankRangeValue').textContent = `${rankLower.toLocaleString()} - ${rankUpper.toLocaleString()}`;
                
                // Update analysis
                document.getElementById('analysisText').textContent = getAnalysisText(predictedRank, totalMarks, predictedScore);
                
                // Update chart
                updateChart(totalMarks, predictedRank, predictedScore);
                
                // Hide loading
                document.getElementById('loading').style.display = 'none';
            }, 800);
        }

        // Event Listeners
        document.getElementById('predictBtn').addEventListener('click', predictRankAndScore);

        // Update calculations on input change
        document.querySelectorAll('#type1Correct, #type1Wrong, #type2Correct, #type2Wrong').forEach(input => {
            input.addEventListener('input', calculateTotalMarks);
        });

        // Initialize
        window.addEventListener('DOMContentLoaded', function() {
            // Calculate initial total marks
            calculateTotalMarks();
            
            // Run initial prediction
            setTimeout(predictRankAndScore, 1000);
        });
    </script>
</body>
</html>
